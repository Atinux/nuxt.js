#!/usr/bin/env node -r esm
import path from 'path'
import Package from '../lib/package'

// Commons
const rootDir = path.resolve(__dirname, '../../..')

// Force NODE_ENV to production
process.env.NODE_ENV = 'production'

// TODO
const distributions = [
  'distributions/nuxt'
  // 'distributions/nuxt-start',
  // 'distributions/nuxt-legacy'
]

// Build all distributions
distributions
  .map(p => path.resolve(rootDir, p))
  .map(p => new Package({ rootDir: path.resolve(rootDir, p) }))
  .forEach(pkg => pkg.build())
